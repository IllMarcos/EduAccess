<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administración</title>
    <link href="css/main.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator/qrcode.js"></script>
</head>
<body>
    <div id="dashboard-container" class="hidden app-layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                 <div class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A11.953 11.953 0 0112 15c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0021 12c0-.778-.099-1.533-.284-2.253" /></svg>
                </div>
                <span>EduAccess</span>
            </div>
            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-link active">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" /></svg>
                    <span>Dashboard</span>
                </a>
                <a href="#groups" class="nav-link">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 7.125A2.25 2.25 0 014.5 4.875h15A2.25 2.25 0 0121.75 7.125v10.5A2.25 2.25 0 0119.5 19.875h-15A2.25 2.25 0 012.25 17.625V7.125z" /></svg>
                    <span>Grupos</span>
                </a>
                <a href="#students" class="nav-link">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" /></svg>
                    <span>Alumnos</span>
                </a>
                <a href="#announcements" class="nav-link">
                     <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" /></svg>
                    <span>Avisos</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <p id="user-email" style="font-size: 0.875rem; color: var(--text-light); text-align: center;"></p>
                <button id="logout-button" class="btn btn-danger" style="width: 100%; margin-top: 1rem;">Cerrar Sesión</button>
            </div>
        </aside>

        <main class="main-content">
            <div id="view-dashboard" class="view">
                <header class="content-header"><h1>Dashboard</h1></header>
                <div class="card">
                    <h2>¡Bienvenido!</h2>
                    <p>Selecciona una opción de la barra lateral para comenzar a gestionar la información de la escuela.</p>
                </div>
            </div>

            <div id="view-groups" class="view hidden">
                <header class="content-header"><h1>Gestión de Grupos</h1></header>
                <div class="view-layout-grid">
                    <div class="form-card">
                        <div class="card">
                            <h2>Nuevo Grupo</h2>
                            <form id="add-group-form">
                                <label for="group-name">Nombre del Grupo</label>
                                <input type="text" id="group-name" placeholder="Ej. 1º A Primaria" class="input-field" required>
                                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Agregar Grupo</button>
                            </form>
                        </div>
                    </div>
                    <div class="list-card">
                        <div class="card">
                            <h2>Grupos Existentes</h2>
                            <div id="groups-list" class="item-list">
                                </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-students" class="view hidden">
                <header class="content-header"><h1>Gestión de Alumnos</h1></header>
                <div class="view-layout-grid">
                    <div class="form-card">
                        <div class="card">
                            <h2>Inscribir Alumno</h2>
                            <form id="add-student-form">
                                <label for="student-name">Nombre Completo</label>
                                <input type="text" id="student-name" placeholder="Nombre del alumno" class="input-field" required>
                                
                                <label for="group-select" style="margin-top: 1rem;">Asignar a Grupo</label>
                                <select id="group-select" class="input-field" required></select>
                                
                                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 1.5rem;">Inscribir Alumno</button>
                            </form>
                        </div>
                    </div>
                    <div class="list-card">
                        <div class="card">
                            <h2>Alumnos Inscritos</h2>
                            <div id="students-list" class="item-list">
                                </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="view-announcements" class="view hidden">
                <header class="content-header"><h1>Enviar Avisos</h1></header>
                <div class="card" style="max-width: 800px; margin: 0 auto;">
                    <h2>Compositor de Avisos</h2>
                    <form id="send-announcement-form" class="announcement-form">
                        <label for="announcement-group-select">Enviar a:</label>
                        <select id="announcement-group-select" class="input-field" required></select>
                        
                        <label for="announcement-text">Mensaje:</label>
                        <textarea id="announcement-text" placeholder="Escribe tu mensaje aquí..." class="input-field" required></textarea>
                        
                        <div style="text-align: right;">
                            <button type="submit" class="btn btn-primary">Enviar Aviso</button>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>
    
    <div id="qr-modal" class="hidden modal-overlay">
         <div class="modal-content">
            <h3 id="qr-student-name" style="font-size: 1.5rem; font-weight: 600; color: var(--text-header); margin-bottom: 1rem;"></h3>
            <div id="qrcode-container" style="display: flex; justify-content: center; padding: 1rem; background-color: white; border-radius: 0.5rem; border: 1px solid var(--border-color);"></div>
            <button id="close-modal-btn" class="btn btn-danger" style="margin-top: 1.5rem;">Cerrar</button>
         </div>
    </div>

    <div id="confirmation-modal" class="hidden modal-overlay">
         <div class="modal-content" style="max-width: 400px;">
            <h3 id="modal-title" style="font-size: 1.5rem; font-weight: 600; color: var(--text-header); margin-bottom: 1rem;">Confirmar Acción</h3>
            <p id="modal-message" style="color: var(--text-body); margin-bottom: 2rem;">¿Estás seguro de que quieres realizar esta acción?</p>
            <div class="modal-actions">
                <button id="modal-cancel-btn" class="btn btn-secondary">Cancelar</button>
                <button id="modal-confirm-btn" class="btn btn-danger-solid">Sí, Eliminar</button>
            </div>
         </div>
    </div>
    
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js" type="module"></script>
    
    <script type="module" src="./js/app.js"></script>
</body>
</html>