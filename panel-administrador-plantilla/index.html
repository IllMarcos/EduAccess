<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administración</title>
    <link href="css/main.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator/qrcode.js"></script>
</head>
<body>
    <div id="app-container">
        <div id="login-container" style="display: flex; align-items: center; justify-content: center; min-height: 100vh;">
            <div class="card" style="max-width: 28rem; width: 100%;">
                <h2 style="font-size: 1.5rem; text-align: center; margin-bottom: 2rem; color: var(--text-header);">Acceso Administrador</h2>
                <p id="error-message" style="color: var(--danger); height: 1.25rem; margin-bottom: 1rem; text-align: center;"></p>
                <form id="login-form" style="display: grid; gap: 1.5rem;">
                    <div>
                        <label for="email" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Correo Electrónico</label>
                        <input type="email" id="email" class="input-field" required>
                    </div>
                    <div>
                        <label for="password" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Contraseña</label>
                        <input type="password" id="password" class="input-field" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%; padding: 0.75rem;">Ingresar</button>
                </form>
            </div>
        </div>

        <div id="dashboard-container" class="hidden app-layout">
            <aside class="sidebar">
                <div class="sidebar-header">
                    <div class="icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A11.953 11.953 0 0112 15c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0021 12c0-.778-.099-1.533-.284-2.253" /></svg>
                    </div>
                    <span>EduAccess</span>
                </div>
                <nav class="sidebar-nav">
                    <a href="#">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" /></svg>
                        <span>Dashboard</span>
                    </a>
                </nav>
                <div class="sidebar-footer">
                    <p id="user-email" style="font-size: 0.875rem; color: var(--text-light); text-align: center;"></p>
                    <button id="logout-button" class="btn btn-danger" style="width: 100%; margin-top: 1rem;">Cerrar Sesión</button>
                </div>
            </aside>

            <main class="main-content">
                <header class="content-header">
                    <h1>Dashboard</h1>
                </header>
                
                <div style="display: grid; grid-template-columns: 1fr; gap: 1.5rem;">
                    <div class="card">
                        <h2>Gestionar Grupos</h2>
                        <form id="add-group-form" style="display: flex; gap: 1rem; margin-bottom: 1.5rem;">
                            <input type="text" id="group-name" placeholder="Ej. 1º A Primaria" class="input-field" style="flex-grow: 1;" required>
                            <button type="submit" class="btn btn-primary">Agregar</button>
                        </form>
                        <div id="groups-list" style="display: grid; gap: 0.75rem;"></div>
                    </div>

                    <div class="card">
                        <h2>Gestionar Alumnos</h2>
                        <form id="add-student-form" style="display: grid; gap: 1rem; margin-bottom: 1.5rem;">
                            <input type="text" id="student-name" placeholder="Nombre completo del alumno" class="input-field" required>
                            <select id="group-select" class="input-field" required></select>
                            <button type="submit" class="btn btn-primary" style="justify-self: start;">Inscribir Alumno</button>
                        </form>
                        <div id="students-list" style="display: grid; gap: 0.75rem;"></div>
                    </div>
                    
                    <div class="card">
                        <h2>Enviar Aviso</h2>
                        <form id="send-announcement-form" style="display: grid; gap: 1rem;">
                            <textarea id="announcement-text" placeholder="Escribe tu mensaje aquí..." class="input-field" style="height: 6rem;" required></textarea>
                            <select id="announcement-group-select" class="input-field" required></select>
                            <button type="submit" class="btn btn-primary" style="justify-self: start;">Enviar Aviso</button>
                        </form>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <div id="qr-modal" class="hidden modal-overlay">
         <div class="modal-content">
            <h3 id="qr-student-name" style="font-size: 1.5rem; font-weight: 600; color: var(--text-header); margin-bottom: 1rem;"></h3>
            <div id="qrcode-container" style="display: flex; justify-content: center; padding: 1rem; background-color: white; border-radius: 0.5rem; border: 1px solid var(--border-color);"></div>
            <button id="close-modal-btn" class="btn btn-danger" style="margin-top: 1.5rem;">Cerrar</button>
         </div>
    </div>
    
    <script type="module" src="./js/app.js"></script>
</body>
</html>